<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Manager Pro</title>
    <!-- PDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root { --primary: #2c3e50; --secondary: #34495e; --accent: #e67e22; }
        body { font-family: 'Segoe UI', sans-serif; background: #eef2f3; margin: 0; padding: 20px; display: flex; justify-content: center; }
        
        .container { display: flex; gap: 20px; max-width: 900px; width: 100%; flex-wrap: wrap; }
        
        /* Left Panel - Settings */
        .settings-panel { flex: 1; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); min-width: 300px; }
        /* Right Panel - Form */
        .form-panel { flex: 1.5; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); min-width: 350px; border-top: 5px solid var(--primary); }

        h2, h3 { color: var(--primary); margin-top: 0; }
        label { font-size: 13px; font-weight: bold; color: #555; margin-top: 10px; display: block; }
        
        input, select, textarea { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; font-size: 14px; box-sizing: border-box; }
        input:focus { border-color: var(--accent); outline: none; }

        .logo-preview { width: 80px; height: 80px; border: 2px dashed #ccc; margin-top: 5px; display: flex; align-items: center; justify-content: center; color: #aaa; font-size: 12px; overflow: hidden; }
        .logo-preview img { width: 100%; height: 100%; object-fit: contain; }

        button { width: 100%; margin-top: 20px; padding: 12px; border: none; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-gen { background: var(--primary); color: white; }
        .btn-gen:hover { background: var(--secondary); }
        
        .seat-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 5px; margin-top: 5px; }
        .seat-box { padding: 5px; border: 1px solid #ddd; text-align: center; cursor: pointer; font-size: 12px; border-radius: 3px; }
        .seat-box.selected { background: var(--accent); color: white; border-color: var(--accent); }

        .footer-note { font-size: 11px; color: #888; text-align: center; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    
    <!-- BRAND SETTINGS (Left Side) -->
    <div class="settings-panel">
        <h3>üè¢ Library Settings</h3>
        <p style="font-size: 12px; color: #666;">Setup your brand details here.</p>
        
        <label>Brand Name</label>
        <input type="text" id="brandName" value="CITY LIBRARY HUB">
        
        <label>Address & Contact</label>
        <textarea id="brandAddress" rows="3">Near Main Market, City Center, New Delhi - 110001. Mob: 9876543210</textarea>
        
        <label>Upload Logo</label>
        <input type="file" id="logoInput" accept="image/*" onchange="previewLogo()">
        <div class="logo-preview" id="logoDisplay">No Logo</div>
    </div>

    <!-- MAIN FORM (Right Side) -->
    <div class="form-panel">
        <h2>üßæ Issue Fee Receipt</h2>
        
        <label>Student Name</label>
        <input type="text" id="stuName" placeholder="Enter student name">

        <label>Select Seat Number (Total 24)</label>
        <select id="seatNo">
            <option value="">-- Select Seat --</option>
            <!-- Javascript will fill 1-24 here -->
        </select>

        <label>Select Plan (Duration)</label>
        <select id="plan" onchange="updatePrice()">
            <option value="">-- Select Duration --</option>
            <option value="6 Hours">6 Hours Slot</option>
            <option value="12 Hours">12 Hours Slot</option>
            <option value="Full Day">Full Day (Custom)</option>
        </select>

        <label>Fees Amount (‚Çπ)</label>
        <input type="number" id="amount" placeholder="Auto-calculated">

        <label>Payment Mode</label>
        <select id="payMode">
            <option value="Cash">Cash</option>
            <option value="UPI">UPI (GPay/PhonePe)</option>
        </select>

        <button class="btn-gen" onclick="generateInvoice()">üñ®Ô∏è GENERATE & DOWNLOAD RECEIPT</button>
        
        <div class="footer-note">System Developed for Library Management</div>
    </div>

</div>

<script>
    // 1. Setup 24 Seats Dropdown Automatically
    const seatSelect = document.getElementById('seatNo');
    for(let i=1; i<=24; i++) {
        let option = document.createElement('option');
        option.value = i;
        option.text = `Seat No. ${i}`;
        seatSelect.add(option);
    }

    // 2. Auto Price Logic
    function updatePrice() {
        const plan = document.getElementById('plan').value;
        const amountBox = document.getElementById('amount');
        
        if(plan === "6 Hours") {
            amountBox.value = 300;
        } else if(plan === "12 Hours") {
            amountBox.value = 400;
        } else {
            amountBox.value = ""; // User can type for custom
        }
    }

    // 3. Logo Handling
    let logoData = null;
    function previewLogo() {
        const file = document.getElementById('logoInput').files[0];
        const reader = new FileReader();
        reader.onloadend = function() {
            logoData = reader.result;
            document.getElementById('logoDisplay').innerHTML = `<img src="${logoData}">`;
        }
        if(file) reader.readAsDataURL(file);
    }

    // 4. Generate PDF Logic
    async function generateInvoice() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        // Get Data
        const brand = document.getElementById('brandName').value;
        const address = document.getElementById('brandAddress').value;
        const name = document.getElementById('stuName').value;
        const seat = document.getElementById('seatNo').value;
        const plan = document.getElementById('plan').value;
        const amount = document.getElementById('amount').value;
        const mode = document.getElementById('payMode').value;
        
        const date = new Date().toLocaleDateString('en-IN');
        const receiptNo = "LIB-" + Math.floor(Math.random() * 10000);

        if(!name || !amount || !seat) {
            alert("Please fill Name, Seat No, and Amount!");
            return;
        }

        // --- PDF DESIGN START ---
        
        // 1. Header Section
        doc.setFillColor(44, 62, 80); // Dark Blue Header
        doc.rect(0, 0, 210, 40, 'F');
        
        // Logo (if uploaded)
        if(logoData) {
            doc.addImage(logoData, 'JPEG', 10, 5, 30, 30);
        }

        // Brand Name (White text)
        doc.setTextColor(255, 255, 255);
        doc.setFont("helvetica", "bold");
        doc.setFontSize(22);
        doc.text(brand.toUpperCase(), 50, 18);
        
        // Address (White small text)
        doc.setFontSize(10);
        doc.setFont("helvetica", "normal");
        doc.text(address, 50, 26);

        // 2. Receipt Info (Right side below header)
        doc.setTextColor(0, 0, 0);
        doc.setFontSize(10);
        doc.text(`Receipt No: ${receiptNo}`, 150, 50);
        doc.text(`Date: ${date}`, 150, 55);

        // 3. Title
        doc.setFontSize(16);
        doc.setFont("helvetica", "bold");
        doc.text("FEE RECEIPT", 15, 60);
        doc.setLineWidth(0.5);
        doc.line(15, 62, 50, 62);

        // 4. Table Content (Using AutoTable Plugin logic manually for control or built-in lines)
        let startY = 75;
        
        // Row 1: Name
        doc.setFontSize(12);
        doc.setFont("helvetica", "normal");
        doc.text("Student Name:", 15, startY);
        doc.setFont("helvetica", "bold");
        doc.text(name, 60, startY);
        
        // Row 2: Seat
        doc.setFont("helvetica", "normal");
        doc.text("Allocated Seat:", 15, startY + 10);
        doc.setFont("helvetica", "bold");
        doc.text(`Seat No. ${seat}`, 60, startY + 10);

        // Row 3: Plan
        doc.setFont("helvetica", "normal");
        doc.text("Duration Plan:", 15, startY + 20);
        doc.text(plan, 60, startY + 20);

        // Row 4: Mode
        doc.text("Payment Mode:", 15, startY + 30);
        doc.text(mode, 60, startY + 30);

        // 5. Amount Box (Highlighted)
        doc.setFillColor(230, 230, 230); // Grey box
        doc.rect(120, 100, 70, 20, 'F');
        doc.setFontSize(14);
        doc.setTextColor(0, 0, 0);
        doc.text("Total Paid:", 125, 113);
        doc.setFontSize(16);
        doc.setFont("helvetica", "bold");
        doc.text(`Rs. ${amount}/-`, 155, 113);

        // 6. Terms
        doc.setFontSize(9);
        doc.setTextColor(100, 100, 100);
        doc.text("Terms: Fees once paid is non-refundable. Maintain silence inside.", 15, 140);

        // 7. Signature (As requested: Library)
        doc.setTextColor(0, 0, 0);
        doc.setFontSize(11);
        doc.setFont("times", "bold");
        doc.text("For, " + brand, 150, 150, null, null, "center");
        
        // Digital Sign Placeholder
        doc.setFont("times", "italic");
        doc.text("Library Authority", 150, 165, null, null, "center");
        doc.line(130, 160, 170, 160);

        // Save
        doc.save(`${name}_Receipt.pdf`);
    }
</script>

</body>
</html>
```
