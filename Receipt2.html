
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Library Receipt</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 10px;
        }

        /* Mobile Container Style */
        .container {
            max-width: 100%;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        h2, h3 {
            text-align: center;
            color: #2c3e50;
            margin-top: 0;
        }

        /* Form Elements */
        label {
            font-weight: bold;
            display: block;
            margin-top: 15px;
            font-size: 14px;
            color: #333;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box; /* Fixes width issues */
            font-size: 16px; /* Better for mobile typing */
        }

        /* Buttons */
        button {
            width: 100%;
            padding: 15px;
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            margin-top: 25px;
            cursor: pointer;
        }
        button:active { background-color: #219150; }

        /* Settings Toggle */
        .settings-box {
            background: #eef2f3;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px dashed #999;
        }

        .logo-preview {
            text-align: center;
            margin-top: 10px;
        }
        .logo-preview img {
            max-height: 60px;
        }
    </style>
</head>
<body>

    <!-- 1. SETTINGS SECTION (Branding) -->
    <div class="container settings-box">
        <h3>üõ†Ô∏è Library Setup</h3>
        <label>Library Name</label>
        <input type="text" id="brandName" value="MY CITY LIBRARY">
        
        <label>Address & Phone</label>
        <textarea id="brandAddress" rows="2">Main Market, Delhi. Mob: 98765XXXXX</textarea>
        
        <label>Upload Logo (Optional)</label>
        <input type="file" id="logoInput" accept="image/*" onchange="previewLogo()">
        <div class="logo-preview" id="logoDisplay"></div>
    </div>

    <!-- 2. MAIN FORM SECTION -->
    <div class="container">
        <h2>üßæ Receipt Maker</h2>

        <label>Student Name</label>
        <input type="text" id="stuName" placeholder="Enter Name">

        <label>Seat Number (1-24)</label>
        <select id="seatNo">
            <option value="">-- Choose Seat --</option>
        </select>

        <label>Duration Plan</label>
        <select id="plan" onchange="updatePrice()">
            <option value="">-- Select Hours --</option>
            <option value="6 Hours">6 Hours (‚Çπ300)</option>
            <option value="12 Hours">12 Hours (‚Çπ400)</option>
            <option value="Full Day">Full Day (Custom)</option>
        </select>

        <label>Amount (‚Çπ)</label>
        <input type="number" id="amount" placeholder="0">

        <label>Payment Mode</label>
        <select id="payMode">
            <option value="Cash">Cash</option>
            <option value="UPI">Online / UPI</option>
        </select>

        <button onclick="generateInvoice()">DOWNLOAD PDF üì•</button>
    </div>

<script>
    // --- 1. Auto Fill Seats 1 to 24 ---
    const seatSelect = document.getElementById('seatNo');
    for(let i=1; i<=24; i++) {
        let opt = document.createElement('option');
        opt.value = i;
        opt.innerText = "Seat " + i;
        seatSelect.appendChild(opt);
    }

    // --- 2. Auto Price Logic ---
    function updatePrice() {
        let plan = document.getElementById('plan').value;
        let priceBox = document.getElementById('amount');
        if(plan === "6 Hours") priceBox.value = 300;
        else if(plan === "12 Hours") priceBox.value = 400;
        else priceBox.value = "";
    }

    // --- 3. Logo Handling ---
    let logoData = null;
    function previewLogo() {
        const file = document.getElementById('logoInput').files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                logoData = e.target.result;
                document.getElementById('logoDisplay').innerHTML = `<img src="${logoData}">`;
            };
            reader.readAsDataURL(file);
        }
    }

    // --- 4. PDF Generation ---
    async function generateInvoice() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        // Get Values
        const brand = document.getElementById('brandName').value;
        const address = document.getElementById('brandAddress').value;
        const name = document.getElementById('stuName').value;
        const seat = document.getElementById('seatNo').value;
        const plan = document.getElementById('plan').value;
        const amount = document.getElementById('amount').value;
        const mode = document.getElementById('payMode').value;
        const date = new Date().toLocaleDateString('en-IN');
        const time = new Date().toLocaleTimeString('en-IN');

        if(!name || !amount || !seat) {
            alert("‚ö†Ô∏è Name, Seat aur Amount bharna zaroori hai!");
            return;
        }

        // DESIGN START
        // Header Blue Box
        doc.setFillColor(41, 128, 185);
        doc.rect(0, 0, 210, 40, 'F');

        // Logo
        if(logoData) {
            doc.addImage(logoData, 'JPEG', 10, 5, 30, 30);
        }

        // Library Name
        doc.setTextColor(255, 255, 255);
        doc.setFontSize(22);
        doc.setFont("helvetica", "bold");
        doc.text(brand, 50, 18);

        // Address
        doc.setFontSize(10);
        doc.setFont("helvetica", "normal");
        doc.text(address, 50, 26);

        // Receipt Details
        doc.setTextColor(0, 0, 0);
        doc.text(`Date: ${date}`, 150, 50);
        doc.text(`Time: ${time}`, 150, 55);

        // Title
        doc.setFontSize(18);
        doc.setFont("helvetica", "bold");
        doc.text("FEE RECEIPT", 15, 60);
        doc.line(15, 63, 60, 63);

        // Student Details
        let y = 80;
        doc.setFontSize(14);
        doc.setFont("helvetica", "normal");

        doc.text(`Student Name :  ${name}`, 15, y);
        doc.text(`Seat Number  :  ${seat}`, 15, y+10);
        doc.text(`Duration Plan:  ${plan}`, 15, y+20);
        doc.text(`Payment Mode :  ${mode}`, 15, y+30);

        // Total Amount Box
        doc.setFillColor(230, 230, 230);
        doc.rect(15, y+45, 180, 15, 'F');
        doc.setFont("helvetica", "bold");
        doc.text(`Total Paid: Rs. ${amount}/-`, 20, y+55);

        // Footer / Signature
        doc.setFontSize(10);
        doc.setFont("times", "italic");
        doc.text("Authorized Signature", 150, 160);
        doc.line(140, 158, 190, 158);

        doc.setFontSize(8);
        doc.setTextColor(100, 100, 100);
        doc.text("Computer Generated Receipt", 105, 180, null, null, "center");

        // Save
        doc.save(`${name}_Receipt.pdf`);
    }
</script>

</body>
</html>
```
